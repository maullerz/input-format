{"version":3,"file":"inputControl.test.js","names":["onChange","onCut","onPaste","onKeyDown","Keys","templateParser","templateFormatter","parseDigit","TEMPLATE","parse","format","describe","it","input","value","selectionStart","selectionEnd","setSelectionRange","position","hasAttribute","attribute","on_change","_","expect","to","equal","done","setTimeout","be","undefined","event","keyCode","Delete","preventDefault","Backspace"],"sources":["../source/inputControl.test.js"],"sourcesContent":["import\n{\n\tonChange,\n\tonCut,\n\tonPaste,\n\tonKeyDown\n}\nfrom './inputControl.js'\n\nimport { Keys } from './dom.js'\n\nimport templateParser from './templateParser.js'\nimport templateFormatter from './templateFormatter.js'\nimport parseDigit from './parseDigit.js'\n\n// US phone number template\nconst TEMPLATE = '(xxx) xxx-xxxx'\nconst parse = templateParser(TEMPLATE, parseDigit)\nconst format = templateFormatter(TEMPLATE)\n\ndescribe('inputControl', function()\n{\n\tit('should handle onChange', function()\n\t{\n\t\tconst input =\n\t\t{\n\t\t\tvalue: '1234567-',\n\t\t\tselectionStart: 5,\n\t\t\tselectionEnd: 6,\n\t\t\tsetSelectionRange(position) {\n\t\t\t\tthis.selectionStart = position\n\t\t\t},\n\t\t\thasAttribute(attribute) {\n\t\t\t\treturn false\n\t\t\t}\n\t\t}\n\n\t\tlet value\n\t\tconst on_change = _ => value = _\n\n\t\tonChange({}, input, parse, format, on_change)\n\n\t\texpect(input.value).to.equal('(123) 456-7')\n\t\texpect(input.selectionStart).to.equal(8)\n\t\texpect(value).to.equal('1234567')\n\t})\n\n\tit('should handle onCut', function(done)\n\t{\n\t\tconst input =\n\t\t{\n\t\t\tvalue: '1234567-',\n\t\t\tselectionStart: 5,\n\t\t\tselectionEnd: 6,\n\t\t\tsetSelectionRange(position) {\n\t\t\t\tthis.selectionStart = position\n\t\t\t},\n\t\t\thasAttribute(attribute) {\n\t\t\t\treturn false\n\t\t\t}\n\t\t}\n\n\t\tlet value\n\t\tconst on_change = _ => value = _\n\n\t\tonCut({}, input, parse, format, on_change)\n\n\t\tsetTimeout(() =>\n\t\t{\n\t\t\texpect(input.value).to.equal('(123) 456-7')\n\t\t\texpect(input.selectionStart).to.equal(8)\n\t\t\texpect(value).to.equal('1234567')\n\t\t\tdone()\n\t\t},\n\t\t0)\n\t})\n\n\tit('should handle onPaste', function()\n\t{\n\t\tconst input =\n\t\t{\n\t\t\tvalue: '1234567-',\n\t\t\tselectionStart: 5,\n\t\t\tselectionEnd: 5,\n\t\t\tsetSelectionRange(position) {\n\t\t\t\tthis.selectionStart = position\n\t\t\t},\n\t\t\thasAttribute(attribute) {\n\t\t\t\treturn false\n\t\t\t}\n\t\t}\n\n\t\tlet value\n\t\tconst on_change = _ => value = _\n\n\t\tonPaste({}, input, parse, format, on_change)\n\n\t\texpect(input.value).to.equal('(123) 456-7')\n\t\texpect(input.selectionStart).to.equal(8)\n\t\texpect(value).to.equal('1234567')\n\t})\n\n\tit('should handle onPaste (with selection)', function()\n\t{\n\t\tconst input =\n\t\t{\n\t\t\tvalue: '1234567-',\n\t\t\tselectionStart: 5,\n\t\t\tselectionEnd: 6,\n\t\t\tsetSelectionRange(position) {\n\t\t\t\tthis.selectionStart = position\n\t\t\t},\n\t\t\thasAttribute(attribute) {\n\t\t\t\treturn false\n\t\t\t}\n\t\t}\n\n\t\tlet value\n\t\tconst on_change = _ => value = _\n\n\t\tonPaste({}, input, parse, format, on_change)\n\n\t\texpect(input.value).to.equal('(123) 457')\n\t\texpect(input.selectionStart).to.equal(8)\n\t\texpect(value).to.equal('123457')\n\t})\n\n\tit('should not handle onKeyDown', function()\n\t{\n\t\tconst input =\n\t\t{\n\t\t\tvalue: '1234567-',\n\t\t\tselectionStart: 5,\n\t\t\tselectionEnd: 6,\n\t\t\tsetSelectionRange(position) {\n\t\t\t\tthis.selectionStart = position\n\t\t\t},\n\t\t\thasAttribute(attribute) {\n\t\t\t\treturn false\n\t\t\t}\n\t\t}\n\n\t\tlet value\n\t\tconst on_change = _ => value = _\n\n\t\tonKeyDown({}, input, parse, format, on_change)\n\n\t\texpect(input.value).to.equal('1234567-')\n\t\texpect(input.selectionStart).to.equal(5)\n\t\texpect(value).to.be.undefined\n\t})\n\n\tit('should handle onKeyDown (Delete)', function()\n\t{\n\t\tconst input =\n\t\t{\n\t\t\tvalue: '1234567-',\n\t\t\tselectionStart: 5,\n\t\t\tselectionEnd: 5,\n\t\t\tsetSelectionRange(position) {\n\t\t\t\tthis.selectionStart = position\n\t\t\t},\n\t\t\thasAttribute(attribute) {\n\t\t\t\treturn false\n\t\t\t}\n\t\t}\n\n\t\tconst event =\n\t\t{\n\t\t\tkeyCode: Keys.Delete,\n\t\t\tpreventDefault() {}\n\t\t}\n\n\t\tlet value\n\t\tconst on_change = _ => value = _\n\n\t\tonKeyDown(event, input, parse, format, on_change)\n\n\t\texpect(input.value).to.equal('(123) 457')\n\t\texpect(input.selectionStart).to.equal(8)\n\t\texpect(value).to.equal('123457')\n\t})\n\n\tit('should handle onKeyDown (Backspace)', function()\n\t{\n\t\tconst input =\n\t\t{\n\t\t\tvalue: '1234567-',\n\t\t\tselectionStart: 5,\n\t\t\tselectionEnd: 5,\n\t\t\tsetSelectionRange(position) {\n\t\t\t\tthis.selectionStart = position\n\t\t\t},\n\t\t\thasAttribute(attribute) {\n\t\t\t\treturn false\n\t\t\t}\n\t\t}\n\n\t\tconst event =\n\t\t{\n\t\t\tkeyCode: Keys.Backspace,\n\t\t\tpreventDefault() {}\n\t\t}\n\n\t\tlet value\n\t\tconst on_change = _ => value = _\n\n\t\tonKeyDown(event, input, parse, format, on_change)\n\n\t\texpect(input.value).to.equal('(123) 467')\n\t\texpect(input.selectionStart).to.equal(7)\n\t\texpect(value).to.equal('123467')\n\t})\n\n\tit('should handle onKeyDown (Backspace with selection)', function()\n\t{\n\t\tconst input =\n\t\t{\n\t\t\tvalue: '1234567-',\n\t\t\tselectionStart: 4,\n\t\t\tselectionEnd: 6,\n\t\t\tsetSelectionRange(position) {\n\t\t\t\tthis.selectionStart = position\n\t\t\t},\n\t\t\thasAttribute(attribute) {\n\t\t\t\treturn false\n\t\t\t}\n\t\t}\n\n\t\tconst event =\n\t\t{\n\t\t\tkeyCode: Keys.Backspace,\n\t\t\tpreventDefault() {}\n\t\t}\n\n\t\tlet value\n\t\tconst on_change = _ => value = _\n\n\t\tonKeyDown(event, input, parse, format, on_change)\n\n\t\texpect(input.value).to.equal('(123) 47')\n\t\texpect(input.selectionStart).to.equal(7)\n\t\texpect(value).to.equal('12347')\n\t})\n\n\tit('should handle onKeyDown (Delete with selection)', function()\n\t{\n\t\tconst input =\n\t\t{\n\t\t\tvalue: '1234567-',\n\t\t\tselectionStart: 4,\n\t\t\tselectionEnd: 6,\n\t\t\tsetSelectionRange(position) {\n\t\t\t\tthis.selectionStart = position\n\t\t\t},\n\t\t\thasAttribute(attribute) {\n\t\t\t\treturn false\n\t\t\t}\n\t\t}\n\n\t\tconst event =\n\t\t{\n\t\t\tkeyCode: Keys.Delete,\n\t\t\tpreventDefault() {}\n\t\t}\n\n\t\tlet value\n\t\tconst on_change = _ => value = _\n\n\t\tonKeyDown(event, input, parse, format, on_change)\n\n\t\texpect(input.value).to.equal('(123) 47')\n\t\texpect(input.selectionStart).to.equal(7)\n\t\texpect(value).to.equal('12347')\n\t})\n})"],"mappings":"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"}